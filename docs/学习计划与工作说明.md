# 学习计划与工作说明

## 1. 项目初始化与基础架构 (Phase 1)

**目标**: 搭建基于 Monorepo 的现代化前端项目架构，配置基础开发环境，并**立即引入测试和国际化基础**。
**涉及技术**: Monorepo (pnpm workspace), React 18, TypeScript, Vite, ESLint, Prettier, Husky, Commitlint, **Vitest, React Testing Library, i18next, Tailwind CSS, shadcn/ui**.
**步骤**:

1.  **环境准备**: 安装 Node.js (LTS), pnpm.
2.  **Monorepo 搭建**: 初始化 pnpm workspace，创建 `apps` (应用) 和 `packages` (共享库) 目录。
3.  **项目创建**: 在 `apps` 下创建主应用 `shop-web` (React+Vite+TS)。
4.  **规范配置**: 配置 ESLint, Prettier, Stylelint (可选)，并集成 Husky 和 Commitlint。
5.  **样式集成**: 安装 Tailwind CSS 并初始化配置。
6.  **UI 库集成**: 初始化 shadcn/ui (`npx shadcn-ui@latest init`)，并添加基础组件 (Button, Input)。
7.  **测试环境搭建**: 安装并配置 Vitest 和 React Testing Library，编写第一个 "Hello World" 组件测试以验证环境。
8.  **国际化配置**: 安装 `i18next` 和 `react-i18next`，配置基础语言包结构 (en/zh)，并实现一个简单的翻译示例。
9.  **基础路由**: 安装 React Router，配置基础路由结构，并**为路由配置编写简单的单元测试**。
10. **认证基础**: 创建 `features/auth`，实现基础的 Mock 登录逻辑 (Zustand + LocalStorage)，并配置 **Protected Route** (路由守卫)。

## 2. UI 组件库与布局实现 (Phase 2)

**目标**: 引入 UI 组件库，实现应用的基础布局，**同时建立组件开发与测试的标准流程**。
**涉及技术**: shadcn/ui, Tailwind CSS, Responsive Design, **Component Testing**.
**步骤**:

1.  **UI 组件生成**: 使用 shadcn CLI 添加所需组件 (Card, Sheet, Badge 等)。
2.  **全局样式**: 确认 `globals.css` 中 Tailwind 指令正确，配置 CSS Variables 主题。
3.  **组件开发 (Layout)**: 开发 `Header`, `Footer` 组件。
    - **实践**: 采用“文件夹即组件”模式，包含 `index.tsx`, `styles.ts`, `Header.test.tsx` (测试渲染和交互), `locales.ts` (组件级翻译)。
4.  **响应式布局**: 实现响应式布局，并在测试中验证不同屏幕尺寸下的表现 (如有条件)。
5.  **首页搭建**: 实现首页静态页面，包含轮播图和分类入口，并编写对应的快照测试 (Snapshot Testing)。
6.  **登录页开发**: 实现登录页面 UI，包含表单验证 (React Hook Form + Zod)，并集成登录 Action。

## 3. 数据模拟与核心状态管理 (Phase 3)

**目标**: 搭建前端数据流，使用 Mock 数据模拟后端接口，**并对数据逻辑进行测试**。
**涉及技术**: MSW (Mock Service Worker), TanStack Query, Zustand, **Hook Testing**.
**步骤**:

1.  **Mock 服务**: 搭建 MSW 环境，定义商品列表、分类等 API 接口。
2.  **请求封装**: 封装 Axios/Fetch 工具。
3.  **状态管理**: 配置 Zustand Store。
    - **实践**: 为 Store 编写单元测试，验证状态更新逻辑。
4.  **数据获取**: 使用 TanStack Query 获取商品列表。
    - **实践**: 编写 Hook 测试 (`renderHook`)，验证数据获取的 Loading/Error/Success 状态。

## 4. 核心功能开发：列表与筛选 (Phase 4)

**目标**: 实现电商核心的商品展示、筛选和排序功能，**确保复杂交互的逻辑正确性**。
**涉及技术**: React Hooks, Form Handling, Debounce, **Integration Testing**.
**步骤**:

1.  **商品卡片**: 封装 `ProductCard` 组件，**包含完整的单元测试** (Props 渲染, 交互事件)。
2.  **筛选侧边栏**: 开发筛选组件，支持分类、价格区间等筛选。
3.  **排序功能**: 实现按价格、销量、时间排序的逻辑。
4.  **交互联动**: 将筛选、排序状态与列表数据联动。
    - **实践**: 编写**集成测试**，模拟用户点击筛选和排序，验证列表数据是否正确更新 (使用 MSW 拦截请求)。

## 5. 核心功能开发：分页与详情 (Phase 5)

**目标**: 完善列表页的分页功能，并优化交互体验。
**涉及技术**: Pagination Logic, URL Sync.
**步骤**:

1.  **分页组件**: 实现分页条，支持页码切换和每页条数选择。
2.  **URL 同步**: 使用 React Router 的 `useSearchParams` 将筛选、排序、分页状态同步到 URL。
    - **实践**: 测试 URL 变化是否正确触发状态更新，以及刷新页面是否恢复状态。
3.  **空状态与加载**: 实现 Skeleton 骨架屏和 Empty 状态，并测试这些边界情况。

## 6. 性能优化 (Phase 6)

**目标**: 针对大数据量和高频交互进行性能优化，**并建立性能监控意识**。
**涉及技术**: Virtual Scroll, Debounce/Throttle, React.memo, **Performance Profiling**.
**步骤**:

1.  **防抖处理**: 对搜索框和价格筛选进行防抖处理，**编写测试验证防抖逻辑** (使用 Jest timers)。
2.  **虚拟滚动**: 引入虚拟滚动技术，对比优化前后的 DOM 节点数量。
3.  **渲染优化**: 使用 React DevTools Profiler 分析渲染性能，使用 `React.memo` 优化，并记录优化对比。

## 7. 进阶功能与 AI 模块 (Phase 7)

**目标**: 增加智能化和个性化功能。
**涉及技术**: AI Integration (Mock), LocalStorage, I18n.
**步骤**:

1.  **AI 推荐**: 实现 "猜你喜欢" 模块。
2.  **AI 对话**: 实现简单的 AI 客服对话框 UI。
3.  **国际化完善**: 确保所有新增文本均支持多语言，检查遗漏的翻译键。
4.  **本地存储**: 记录用户偏好，**编写测试验证 LocalStorage 读写逻辑**。

## 8. 全面验收与部署 (Phase 8)

**目标**: 进行最终的质量检查和部署。
**涉及技术**: E2E Testing, CI/CD.
**步骤**:

1.  **E2E 测试**: 使用 Cypress 或 Playwright 模拟用户完整的购物浏览流程 (首页 -> 筛选 -> 详情 -> 模拟下单)。
2.  **构建优化**: 分析构建产物，进行代码分割。
3.  **自动化部署**: 配置 CI/CD 流程，确保每次提交自动运行测试和构建。
4.  **文档编写**: 完善 `README.md`，编写项目总结。
