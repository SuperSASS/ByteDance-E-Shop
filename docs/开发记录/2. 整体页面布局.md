# 0x02 整体页面布局

在这里基于 shadcn/ui 搭建整体页面布局。

补充一些 shadcn/ui 的使用方式，提供了两种：

- Components：即原子组件，如按钮等
- Blocks：即基于组件封装好的、开箱即用的大型组件/功能/页面，如 Sidebar、登录页等。

## 1. 安装基础 UI 组件

为了构建页面，首先需要安装一批 shadcn/ui 的基础组件。

```bash
pnpm dlx shadcn@latest add form input label check-box switch toggle button button-group navigation-menu breadcrumb pagination tabs dropdown-menu command sonner dialog alert-dialog popover sheet drawer empty skeleton separator scroll-area carousel avatar badge card aspect-ratio
```

- **表单/状态类**
  - `form`: 表单载体，集成 React Hook Form。  
    _说明：这里与 React Hook Form 集成，可以方便地使用表单功能，如表单验证、表单重置等，开箱即用。但因为紧耦合，故后续发展趋势推荐使用无逻辑的`field`，并自行搭配 React Hook Form 使用。后续也不再对`form`维护。_
  - `input`: 输入框
  - `label`: 标签
  - `check-box`: 勾选框
  - `switch`: 开关
  - `toggle`: 切换（类似开关，不同表现形式）  
    可用于添加到最爱。
- **展示类**
  - `card`: 卡片
  - `badge`: 徽标
  - `avatar`: 头像
  - `aspect-ratio`: 图片按比例展示
  - `carousel`: 轮播图
- **交互类**
  - 按钮
    - `button`
    - [`button-group`](https://ui.shadcn.com/docs/components/button-group): 按钮组
  - 导航/分栏分页
    - [`navigation-menu`](https://ui.shadcn.com/docs/components/navigation-menu): 导航菜单
    - `breadcrumb`: 面包屑导航
    - `pagination`: 分页栏
      适合放在 Header 中
    - `tabs`: 标签页
  - 菜单/面板
    - `dropdown-menu`: 下拉菜单
    - [`command`](https://ui.shadcn.com/docs/components/command): 命令菜单/命令面板 集成组件（可直接展示 / dialog 弹出）  
      类似 VSCode 的 Ctrl+Shift+P。
  - 弹窗
    - `sonner`: 展示 Toast 通知
    - `dialog`: 普通 dialog（区别于`alert-dialog`）
    - [`alert-dialog`](https://ui.shadcn.com/docs/components/alert-dialog): 警告/重要 dialog（必须执行操作，点遮罩层不关闭，而 dialog 会关闭）
    - [`popover`](https://ui.shadcn.com/docs/components/popover): 气泡卡片按钮（用于展示和交互）  
      可用于 AI 对话框。
      _区别于`dropdown-menu`，其语义是“选择操作去执行”（点击命令后关闭），而这里是“展示/交互”（只有点击外部才关闭）_
    - `sheet`: 抽屉/侧边栏（与`drawer`类似，但PC端常用）
    - [`drawer`](https://ui.shadcn.com/docs/components/drawer): 底部抽屉（与`sheet`类似，但移动端常用，类原生）
  - 交互状态
    - `empty`: 空状态（如没有搜索到结果）
    - `skeleton`: 骨架屏，加载状态
- **布局类**
  - `separator`: 分割线
  - `scroll-area`: 滚动区域

### 重构为规范组织

本项目的 Component 组织结构如下：

```
components/            # **通用** UI 组件 (非业务相关，如 Button, Modal)
├── ui/                # shadcn/ui 组件
│   ├── Button/        # 文件夹组件模式 (Component Folder Pattern)
│   │   ├── Button.tsx         # 组件实现 (明确命名)
│   │   ├── Button.test.tsx    # 单元测试
│   │   ├── Button.stories.tsx # （可选）Storybook
│   │   ├── Button.types.ts    # 类型定义
│   │   ├── index.ts           # 仅做导出 (Barrel Export)
│   │   ├── README.md          # 文档
│   │   └── fixtures/          # Mock 数据（Test Fixtures，测试固件），如用户数据，在 test 中使用
```

而 shadcn/ui 的组件不符合此规范，可通过`scripts`添加脚本`refactor-ui.cjs`进行重构，脚本让 GPT 生成。
在`package.json`中添加脚本：

```json
"refactor:ui": "node scripts/refactor-ui.cjs"
```

然后执行如下命令，即可完成重构

```bash
pnpm run refactor:ui
```

## 2. 编写基本 Header 和 Layout 并应用到 Router

### 1. Header

- 左侧：Logo + 标题
- 中间：搜索栏 - Input
- 右侧：
  - 通知展示 - NotificationPopover - Popover
  - 语言切换 - LanguageSwitcher - DropdownMenu + useTranslation
  - 主题切换 - ThemeToggle - useTheme
  - 用户面板 - UserPanel - DropdownMenu

### 2. Layout

### 3. Router

## 临时：采用 shadcn/ui 的登录 Block

[选择 shadcn/ui 的登录 Block](https://ui.shadcn.com/blocks/login#login-04)。

通过`npx shadcn@latest add login-04`安装。

然后直接在`login` Page 中使用。
